<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <title>Eng. Gumbo Wajonya | Governor of Siaya</title>
  <meta name="description" content="Official campaign dashboard for Eng. Gumbo Wajonya ‚Äî Governor of Siaya. Track momentum, baseline county stats, priorities, events, and verified polling sources." />
  <meta name="theme-color" content="#006600" />

  <!-- Open Graph -->
  <meta property="og:title" content="Eng. Gumbo Wajonya | Governor of Siaya" />
  <meta property="og:description" content="Premium campaign site: priorities, county dashboard, events, and verified polling support." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="1.jpg" />

  <!-- Security (static hosting friendly) -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
                 img-src 'self' data: https:;
                 style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
                 font-src https://fonts.gstatic.com data:;
                 script-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://translate.google.com;
                 connect-src 'self' https:;
                 frame-src https://translate.google.com https://translate.googleapis.com;
                 base-uri 'self';
                 form-action 'self';
                 object-src 'none';
                 frame-ancestors 'none';
                 upgrade-insecure-requests">

  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta name="referrer" content="strict-origin-when-cross-origin">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Kenya colors */
      --ke-black:#000; --ke-red:#BB0000; --ke-green:#006600; --ke-white:#fff;
      /* Siaya-inspired accent */
      --siaya-gold:#D08810;

      --bg:#070A10;
      --card:rgba(255,255,255,.06);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.70);
      --muted2:rgba(255,255,255,.55);
      --border:rgba(255,255,255,.12);
      --shadow:0 22px 56px rgba(0,0,0,.55);
      --shadow2:0 14px 34px rgba(0,0,0,.35);
      --radius:18px; --radius2:26px; --max:1180px;
      --focus:0 0 0 4px rgba(0,102,0,.32);
    }
    [data-theme="light"]{
      --bg:#f6f8ff;
      --card:#fff;
      --text:#0b1020;
      --muted:rgba(11,16,32,.70);
      --muted2:rgba(11,16,32,.55);
      --border:rgba(11,16,32,.12);
      --shadow:0 22px 56px rgba(2,6,23,.12);
      --shadow2:0 14px 34px rgba(2,6,23,.10);
      --focus:0 0 0 4px rgba(187,0,0,.20);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(1100px 650px at 12% 10%, rgba(0,102,0,.18), transparent 58%),
        radial-gradient(900px 620px at 85% 18%, rgba(187,0,0,.14), transparent 58%),
        radial-gradient(900px 650px at 55% 88%, rgba(208,136,16,.12), transparent 62%),
        var(--bg);
      overflow-x:hidden;
      text-rendering:optimizeLegibility;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    a{color:inherit;text-decoration:none}
    a:hover{text-decoration:underline;text-underline-offset:4px}
    img{max-width:100%;display:block}
    .wrap{max-width:var(--max);margin:0 auto;padding:0 18px}

    /* Accessibility */
    .skip{position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden}
    .skip:focus{
      left:16px;top:16px;width:auto;height:auto;overflow:visible;
      background:var(--card);border:1px solid var(--border);
      padding:10px 12px;border-radius:12px;box-shadow:var(--shadow2);
      outline:none;z-index:1000
    }
    :focus-visible{outline:none;box-shadow:var(--focus);border-radius:12px}
    @media (prefers-reduced-motion: reduce){
      *{scroll-behavior:auto!important;transition:none!important;animation:none!important}
    }

    header{
      position:sticky;top:0;z-index:50;
      backdrop-filter: blur(14px);
      background: linear-gradient(to bottom, rgba(0,0,0,.62), rgba(0,0,0,.18));
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    [data-theme="light"] header{
      background: linear-gradient(to bottom, rgba(246,248,255,.92), rgba(246,248,255,.70));
      border-bottom:1px solid rgba(11,16,32,.10);
    }

    .nav{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 0;flex-wrap:wrap}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{
      width:42px;height:42px;border-radius:16px;
      background: linear-gradient(135deg, var(--ke-black) 0 20%, var(--ke-red) 20% 45%, var(--ke-white) 45% 52%, var(--ke-green) 52% 100%);
      border:1px solid rgba(255,255,255,.14);
      box-shadow:0 18px 42px rgba(0,102,0,.18);
    }
    [data-theme="light"] .logo{border:1px solid rgba(11,16,32,.12)}
    .brand h1{margin:0;line-height:1.15}
    .brand h1 .t{font-weight:950;font-size:14px}
    .brand h1 .s{font-weight:800;font-size:12px;color:var(--muted)}
    nav ul{margin:0;padding:0;list-style:none;display:flex;gap:8px;flex-wrap:wrap}
    nav a{padding:10px 12px;border-radius:14px;border:1px solid transparent;color:var(--muted);font-weight:900}
    nav a:hover{background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.14);color:var(--text);text-decoration:none}
    [data-theme="light"] nav a:hover{background:rgba(11,16,32,.04);border-color:rgba(11,16,32,.12)}

    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:10px;
      padding:10px 12px;border-radius:14px;border:1px solid var(--border);
      background:rgba(255,255,255,.06);color:var(--text);font-weight:950;cursor:pointer;
      user-select:none
    }
    [data-theme="light"] .btn{background:#fff}
    .btn.primary{
      border-color: rgba(0,102,0,.35);
      background: linear-gradient(135deg, rgba(0,102,0,.52), rgba(187,0,0,.22));
    }
    .btn.primary:hover{background: linear-gradient(135deg, rgba(0,102,0,.62), rgba(187,0,0,.28))}
    .btn.ghost:hover{background:rgba(255,255,255,.10)}
    [data-theme="light"] .btn.ghost:hover{background:rgba(11,16,32,.04)}

    .pill{
      display:inline-flex;align-items:center;gap:10px;
      padding:8px 10px;border-radius:999px;border:1px solid var(--border);
      background:rgba(255,255,255,.06);color:var(--muted);font-weight:900
    }

    .card{
      border:1px solid var(--border);
      background: linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.05));
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    [data-theme="light"] .card{background: linear-gradient(180deg, #fff, #f9fbff)}
    .pad{padding:20px}

    section{padding:18px 0}
    .hero{padding:40px 0 18px}
    .heroGrid{display:grid;grid-template-columns:1.15fr .85fr;gap:16px}
    @media(max-width:980px){.heroGrid{grid-template-columns:1fr}}

    .headline{margin:10px 0 10px;font-weight:980;letter-spacing:-1px;font-size:clamp(28px,3.2vw,46px);line-height:1.05}
    .subhead{margin:0 0 14px;color:var(--muted);font-weight:750;max-width:74ch}

    .kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:14px}
    @media(max-width:680px){.kpis{grid-template-columns:1fr}}

    .kpi{
      border:1px solid var(--border);
      background:rgba(255,255,255,.06);
      border-radius:18px;
      padding:12px;
      box-shadow:var(--shadow2);
    }
    [data-theme="light"] .kpi{background:rgba(11,16,32,.03)}
    .kpi .n{font-weight:980;font-size:22px}
    .kpi .l{font-weight:820;font-size:12px;color:var(--muted);margin-top:4px}

    .slideshow{
      min-height:320px;border-radius:var(--radius2);border:1px solid var(--border);
      position:relative;overflow:hidden;background:#000;box-shadow:var(--shadow)
    }
    .slide{
      position:absolute;inset:0;background-size:cover;background-position:center;
      opacity:0;transition:opacity .9s ease;
      filter:saturate(1.05) contrast(1.05);
      transform:scale(1.02)
    }
    .slide.on{opacity:.92}
    .overlay{position:absolute;inset:0;background:linear-gradient(180deg, rgba(0,0,0,.05), rgba(0,0,0,.72))}
    .caption{position:absolute;left:16px;right:16px;bottom:16px}
    .caption .name{font-weight:980;font-size:18px;letter-spacing:-.4px}
    .caption .title{color:var(--muted);font-weight:850;font-size:13px;margin-top:4px}
    .cta{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}

    .sectionTitle{display:flex;align-items:flex-end;justify-content:space-between;gap:14px;margin:10px 0 12px;flex-wrap:wrap}
    .sectionTitle h2{margin:0;font-weight:980;letter-spacing:-.3px;font-size:clamp(20px,2vw,28px)}
    .sectionTitle p{margin:0;color:var(--muted);font-weight:750;font-size:13px;max-width:74ch}

    .grid3{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    @media(max-width:900px){.grid3{grid-template-columns:1fr}.grid2{grid-template-columns:1fr}}

    .feature{
      border:1px solid var(--border);
      background:rgba(255,255,255,.06);
      border-radius:18px;
      padding:14px;
      box-shadow:var(--shadow2);
      position:relative;overflow:hidden
    }
    [data-theme="light"] .feature{background:rgba(11,16,32,.03)}
    .feature h3{margin:0 0 6px;font-size:14px;font-weight:980}
    .feature p{margin:0;color:var(--muted);font-weight:740;font-size:13px}

    .mini{font-size:12px;color:var(--muted2);font-weight:750}
    .hr{height:1px;background:var(--border);margin:16px 0}

    .controls{display:flex;flex-wrap:wrap;gap:10px;align-items:flex-end;justify-content:space-between}
    label{display:block;font-size:12px;color:var(--muted);font-weight:950;margin:0 0 6px}
    select,input[type="search"],input[type="text"],textarea{
      width:100%;border-radius:14px;border:1px solid var(--border);
      background:rgba(255,255,255,.06);color:var(--text);
      padding:10px 12px;font:inherit;outline:none
    }
    [data-theme="light"] select,[data-theme="light"] input[type="search"],[data-theme="light"] input[type="text"],[data-theme="light"] textarea{background:#fff}
    textarea{resize:vertical}

    .chartBox{height:210px}
    .tableWrap{
      overflow:auto;border-radius:18px;border:1px solid var(--border);
      background:rgba(255,255,255,.04)
    }
    [data-theme="light"] .tableWrap{background:rgba(11,16,32,.02)}
    table{border-collapse:separate;border-spacing:0;width:100%;min-width:980px}
    th,td{padding:12px 12px;border-bottom:1px solid var(--border);font-size:13px;vertical-align:middle}
    th{
      position:sticky;top:0;z-index:2;
      background:rgba(0,0,0,.28);backdrop-filter:blur(10px);
      color:var(--muted);font-weight:980
    }
    [data-theme="light"] th{background:rgba(246,248,255,.92)}
    tr:hover td{background:rgba(255,255,255,.04)}
    [data-theme="light"] tr:hover td{background:rgba(11,16,32,.03)}

    .badgePref{
      display:inline-flex;align-items:center;gap:8px;
      padding:6px 10px;border-radius:999px;
      border:1px solid rgba(208,136,16,.55);
      background:linear-gradient(135deg, rgba(208,136,16,.18), rgba(0,102,0,.14));
      font-weight:980;font-size:12px;white-space:nowrap
    }
    .badgeLead{
      display:inline-flex;align-items:center;gap:8px;
      padding:6px 10px;border-radius:999px;
      border:1px solid rgba(0,102,0,.45);
      background:linear-gradient(135deg, rgba(0,102,0,.24), rgba(208,136,16,.14));
      font-weight:980;font-size:12px;white-space:nowrap
    }
    .tagNeutral{
      display:inline-flex;align-items:center;gap:8px;
      padding:6px 10px;border-radius:999px;
      border:1px solid rgba(255,255,255,.20);
      background:rgba(255,255,255,.08);
      color:var(--muted);font-weight:980;font-size:12px;white-space:nowrap
    }

    .modalOverlay{
      position:fixed;inset:0;background:rgba(0,0,0,.55);
      display:none;align-items:center;justify-content:center;
      padding:18px;z-index:999
    }
    .modal{
      width:min(680px, 100%);
      border:1px solid var(--border);
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border-radius:20px;box-shadow:var(--shadow);
      overflow:hidden
    }
    [data-theme="light"] .modal{background:linear-gradient(180deg, #fff, #f7f9ff)}
    .modalHead{display:flex;justify-content:space-between;align-items:center;gap:10px;padding:14px 16px;border-bottom:1px solid var(--border)}
    .modalHead strong{font-weight:980}
    .modalBody{padding:16px}
    .modalGrid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media(max-width:720px){.modalGrid{grid-template-columns:1fr}}
    .modalFoot{display:flex;justify-content:flex-end;gap:10px;flex-wrap:wrap;padding:14px 16px;border-top:1px solid var(--border)}
    .hint{padding:10px 12px;border:1px dashed rgba(255,255,255,.18);border-radius:14px;background:rgba(255,255,255,.05);color:var(--muted);font-weight:760;font-size:12px}

    .toast{
      position:fixed;left:50%;bottom:18px;transform:translateX(-50%);
      background:rgba(0,0,0,.62);border:1px solid rgba(255,255,255,.14);
      color:#fff;padding:10px 12px;border-radius:14px;box-shadow:var(--shadow2);
      opacity:0;pointer-events:none;transition:opacity .25s ease;z-index:60;font-weight:900;
      max-width:min(820px, calc(100vw - 36px))
    }
    [data-theme="light"] .toast{background:rgba(11,16,32,.78)}
    .toast.show{opacity:1}

    footer{padding:26px 0 40px;color:var(--muted);font-size:13px}

    .floatingBar{
      position:fixed;right:16px;bottom:16px;z-index:80;
      display:flex;flex-direction:column;gap:10px
    }
    .fab{
      display:inline-flex;align-items:center;gap:10px;
      padding:12px 14px;border-radius:999px;
      border:1px solid var(--border);
      background:rgba(255,255,255,.08);
      box-shadow:var(--shadow2);
      font-weight:950;cursor:pointer
    }
    [data-theme="light"] .fab{background:#fff}
    .fab small{font-weight:850;color:var(--muted)}
  </style>
</head>

<body data-theme="dark">
<a class="skip" href="#main">Skip to content</a>

<header>
  <div class="wrap nav">
    <div class="brand" aria-label="Campaign brand">
      <div class="logo" aria-hidden="true"></div>
      <h1>
        <div class="t">Eng. Gumbo Wajonya</div>
        <div class="s">Governor of Siaya ‚Ä¢ People ‚Ä¢ Delivery ‚Ä¢ Integrity</div>
      </h1>
    </div>

    <nav aria-label="Primary">
      <ul>
        <li><a href="#home">Home</a></li>
        <li><a href="#priorities">Priorities</a></li>
        <li><a href="#dashboard">Dashboard</a></li>
        <li><a href="#events">Events</a></li>
        <li><a href="#volunteer">Volunteer</a></li>
        <li><a href="#translate">Translate</a></li>
      </ul>
    </nav>

    <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
      <button class="btn ghost" id="themeBtn" type="button" aria-label="Toggle theme">üåó Theme</button>
      <button class="btn ghost" id="textBtn" type="button" aria-label="Toggle larger text">üîé Text</button>
      <a class="btn primary" href="#volunteer">Join the Movement</a>
    </div>
  </div>
</header>

<main id="main">
  <!-- HERO -->
  <section class="hero" id="home">
    <div class="wrap heroGrid">
      <article class="card">
        <div class="pad">
          <span class="pill">Premium campaign HQ ‚Ä¢ Clean stats ‚Ä¢ Verified polling support</span>
          <h2 class="headline">A winning plan for Siaya ‚Äî practical delivery in every sub-county.</h2>
          <p class="subhead">
            This is a modern campaign platform: priorities, events, and a simple dashboard.
            <strong>Preferred</strong> shows internal momentum. <strong>Leading (Verified)</strong> is shown only when you add a real published poll source URL + rating (A/B) + numbers.
          </p>

          <div class="kpis" aria-label="Campaign KPIs">
            <div class="kpi">
              <div class="n" id="kpiMomentum">88</div>
              <div class="l">Avg Momentum (Internal)</div>
            </div>
            <div class="kpi">
              <div class="n" id="kpiVoters">‚Äî</div>
              <div class="l">Registered Voters (Total)</div>
            </div>
            <div class="kpi">
              <div class="n">6</div>
              <div class="l">Sub-counties covered</div>
            </div>
          </div>

          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:14px;">
            <a class="btn primary" href="#dashboard">See the Dashboard</a>
            <button class="btn" id="shareBtn" type="button">üì£ Share</button>
            <a class="btn" href="#events">üìÖ Events</a>
          </div>

          <div class="mini" style="margin-top:10px;">
            Campaign message: stronger services, stronger economy, transparent delivery.
          </div>
        </div>
      </article>

      <aside class="card slideshow" aria-label="Campaign gallery">
        <div class="slide on" style="background-image:url('1.jpg')"></div>
        <div class="slide" style="background-image:url('2.jpg')"></div>
        <div class="slide" style="background-image:url('3.jpg')"></div>
        <div class="slide" style="background-image:url('4.jpg')"></div>
        <div class="slide" style="background-image:url('5.jpg')"></div>
        <div class="slide" style="background-image:url('6.jpg')"></div>
        <div class="slide" style="background-image:url('7.jpg')"></div>
        <div class="overlay" aria-hidden="true"></div>
        <div class="caption">
          <div class="name">Eng. Gumbo Wajonya</div>
          <div class="title">A modern, united Siaya ‚Äî from Ugunja to Ugenya, Bondo to Gem.</div>
          <div class="cta">
            <a class="btn primary" href="#volunteer">Volunteer</a>
            <a class="btn" href="#priorities">Priorities</a>
          </div>
        </div>
      </aside>
    </div>
  </section>

  <!-- PRIORITIES -->
  <section id="priorities">
    <div class="wrap">
      <div class="sectionTitle">
        <h2>What we will deliver</h2>
        <p>Simple, measurable priorities that touch households directly ‚Äî and a dashboard culture of accountability.</p>
      </div>

      <div class="grid3">
        <div class="feature">
          <h3>Health & Dignity</h3>
          <p>Stronger primary care, staffed facilities, reliable medicine supply, and emergency response readiness.</p>
        </div>
        <div class="feature">
          <h3>Jobs & MSMEs</h3>
          <p>Youth skills, market linkages, business support, and value chains that grow income locally.</p>
        </div>
        <div class="feature">
          <h3>Water & Roads</h3>
          <p>Functional water systems, maintenance culture, and roads that unlock schools, farms, and markets.</p>
        </div>
        <div class="feature">
          <h3>Farm Prosperity</h3>
          <p>Inputs, extension services, storage & processing support, and fair market access.</p>
        </div>
        <div class="feature">
          <h3>Transparent Delivery</h3>
          <p>Citizen-facing progress updates: budgets, timelines, and completion status per project.</p>
        </div>
        <div class="feature">
          <h3>Digital County</h3>
          <p>Service digitization, open dashboards, and a responsive help & feedback channel for citizens.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- DASHBOARD -->
  <section id="dashboard">
    <div class="wrap">
      <div class="sectionTitle">
        <h2>Sub-county dashboard</h2>
        <p>Only what matters: momentum + baseline stats + verified polling (if you add credible sources).</p>
      </div>

      <div class="card">
        <div class="pad">
          <div class="controls">
            <div style="min-width:240px;flex:1;">
              <label for="metric">Metric</label>
              <select id="metric">
                <option value="momentum">Momentum (Internal)</option>
                <option value="voters">Registered Voters (Baseline)</option>
                <option value="population">Population 2019 (Baseline)</option>
                <option value="polling">Polling (Verified) ‚Äî Gumbo %</option>
              </select>
            </div>
            <div style="min-width:240px;flex:1;">
              <label for="search">Search</label>
              <input id="search" type="search" placeholder="Type: Bondo, Gem..." />
            </div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;">
              <button class="btn" id="downloadJson" type="button">‚¨áÔ∏è Export</button>
              <button class="btn" id="resetDemo" type="button">‚Ü©Ô∏è Reset</button>
            </div>
          </div>

          <div class="hr"></div>

          <div class="chartBox">
            <canvas id="chart" height="110" aria-label="Metric chart" role="img"></canvas>
          </div>

          <div class="hr"></div>

          <div class="tableWrap" aria-label="Sub-county table">
            <table>
              <thead>
                <tr>
                  <th>Sub-county</th>
                  <th>Preferred</th>
                  <th>Momentum</th>
                  <th>Population (2019)</th>
                  <th>Voters (2022)</th>
                  <th>Polling (Verified)</th>
                  <th>Leading</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="tbody"></tbody>
            </table>
          </div>

          <div class="mini" style="margin-top:10px;">
            Verified polling rule: needs <strong>Source URL</strong> + <strong>Rating A/B</strong> + numbers.
            Leading appears only when Gumbo% ‚àí runner-up% ‚â• 2.0.
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- EVENTS -->
  <section id="events">
    <div class="wrap">
      <div class="sectionTitle">
        <h2>Events & Mobilization</h2>
        <p>Add rallies, meetings, and community engagements. Visitors can download a calendar file (ICS).</p>
      </div>

      <div class="grid2">
        <div class="card">
          <div class="pad">
            <h3 style="margin:0 0 10px;font-weight:980;font-size:16px;">Upcoming events (demo)</h3>
            <div class="mini" style="margin-bottom:10px;">Edit these in code later or export to share.</div>

            <div class="feature">
              <h3>Townhall ‚Ä¢ Siaya</h3>
              <p><strong>Date:</strong> Next Saturday ‚Ä¢ <strong>Time:</strong> 10:00 AM ‚Ä¢ <strong>Theme:</strong> Jobs & MSMEs</p>
            </div>
            <div style="height:10px"></div>
            <div class="feature">
              <h3>Community Baraza ‚Ä¢ Bondo</h3>
              <p><strong>Date:</strong> Next Week ‚Ä¢ <strong>Time:</strong> 2:00 PM ‚Ä¢ <strong>Theme:</strong> Water & Roads</p>
            </div>
            <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;">
              <button class="btn primary" id="downloadIcs" type="button">üìÖ Download Calendar</button>
              <button class="btn" id="copyEvents" type="button">üìã Copy Text</button>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="pad">
            <h3 style="margin:0 0 10px;font-weight:980;font-size:16px;">Campaign promise</h3>
            <div class="feature">
              <h3>Respectful campaigning</h3>
              <p>We win with ideas, delivery record, and evidence ‚Äî not misinformation.</p>
            </div>
            <div style="height:10px"></div>
            <div class="feature">
              <h3>Open feedback</h3>
              <p>Citizens report issues and suggestions, and we respond with action and timelines.</p>
            </div>
            <div class="hr"></div>
            <div class="mini">
              Add official phone/email/socials when ready (footer + floating buttons).
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- VOLUNTEER -->
  <section id="volunteer">
    <div class="wrap">
      <div class="sectionTitle">
        <h2>Join the Movement</h2>
        <p>Volunteer, host a meeting, or share verified sources for polling. (Demo saves locally on device.)</p>
      </div>

      <div class="card">
        <div class="pad">
          <div class="grid2">
            <div>
              <div class="hint">
                For real data collection, connect a form service later. This demo saves locally only.
              </div>
              <div style="height:12px"></div>

              <div class="grid2">
                <div>
                  <label for="vName">Full name</label>
                  <input id="vName" type="text" placeholder="Your name" autocomplete="name" />
                </div>
                <div>
                  <label for="vPhone">Phone</label>
                  <input id="vPhone" type="text" placeholder="+254..." autocomplete="tel" />
                </div>
              </div>

              <div style="margin-top:12px;">
                <label for="vSub">Sub-county</label>
                <select id="vSub">
                  <option>Alego Usonga</option>
                  <option>Bondo</option>
                  <option>Gem</option>
                  <option>Rarieda</option>
                  <option>Ugenya</option>
                  <option>Ugunja</option>
                </select>
              </div>

              <div style="margin-top:12px;">
                <label for="vMsg">How would you like to help?</label>
                <textarea id="vMsg" rows="4" placeholder="Volunteer, mobilize, logistics, data verification, media, etc."></textarea>
              </div>

              <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px;">
                <button class="btn primary" id="saveVolunteer" type="button">Save locally</button>
                <button class="btn" id="clearVolunteer" type="button">Clear</button>
                <button class="btn" id="downloadVolunteer" type="button">‚¨áÔ∏è Download</button>
              </div>

              <div class="mini" style="margin-top:10px;" id="volStatus" aria-live="polite"></div>
            </div>

            <div>
              <h3 style="margin:0 0 10px;font-weight:980;font-size:16px;">Quick actions</h3>
              <div class="feature">
                <h3>Spread the message</h3>
                <p>Share this site, invite friends, and host a small community conversation.</p>
              </div>
              <div style="height:10px"></div>
              <div class="feature">
                <h3>Verified polling sources</h3>
                <p>If you have credible polling links, add them in the dashboard to enable ‚ÄúLeading (Verified)‚Äù.</p>
              </div>
              <div style="height:10px"></div>
              <div class="feature">
                <h3>Accessibility first</h3>
                <p>Theme toggle, larger text toggle, translate widget, and clean contrast.</p>
              </div>
              <div class="hr"></div>
              <div class="mini">
                Add donation links later (M-PESA/Till/Paybill) only if official & approved.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- TRANSLATE -->
  <section id="translate">
    <div class="wrap">
      <div class="sectionTitle">
        <h2>Translate</h2>
        <p>Make the message accessible to everyone.</p>
      </div>
      <div class="card">
        <div class="pad">
          <div id="google_translate_element" aria-label="Google Translate widget"></div>
          <div class="mini" style="margin-top:10px;">
            If it doesn‚Äôt load, your browser may block translate.google.com frames.
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

<footer>
  <div class="wrap">
    <div class="hr"></div>
    <div style="display:flex;gap:10px;flex-wrap:wrap;justify-content:space-between;align-items:center;">
      <div>¬© <span id="year"></span> Eng. Gumbo Wajonya ‚Ä¢ Siaya County</div>
      <div class="mini">Campaign HQ ‚Ä¢ Clean stats ‚Ä¢ Verified polling support</div>
    </div>
  </div>
</footer>

<!-- Floating bar -->
<div class="floatingBar" aria-label="Quick actions">
  <button class="fab" id="fabShare" type="button">üì£ <span>Share</span> <small>WhatsApp</small></button>
  <a class="fab" href="#volunteer">ü§ù <span>Volunteer</span> <small>Join</small></a>
  <button class="fab" id="fabTop" type="button">‚¨ÜÔ∏è <span>Top</span> <small>Back</small></button>
</div>

<!-- Poll Editor Modal -->
<div class="modalOverlay" id="pollModal" role="dialog" aria-modal="true" aria-labelledby="pollTitle">
  <div class="modal">
    <div class="modalHead">
      <strong id="pollTitle">Edit Verified Poll</strong>
      <button class="btn" id="closeModal" type="button" aria-label="Close">‚úï</button>
    </div>
    <div class="modalBody">
      <div class="hint" style="margin-bottom:12px;">
        ‚ÄúLeading (Verified)‚Äù is shown only when:
        Source URL exists + Rating is A/B + (Gumbo% ‚àí Runner-up%) ‚â• 2.0.
      </div>

      <div class="modalGrid">
        <div>
          <label for="pSub">Sub-county</label>
          <input id="pSub" type="text" readonly />
        </div>
        <div>
          <label for="pRating">Methodology rating (A/B)</label>
          <input id="pRating" type="text" placeholder="A or B" />
        </div>
        <div style="grid-column:1/-1">
          <label for="pUrl">Source URL (required)</label>
          <input id="pUrl" type="text" placeholder="https://..." />
        </div>
        <div>
          <label for="pGumbo">Gumbo %</label>
          <input id="pGumbo" type="text" placeholder="e.g. 52" />
        </div>
        <div>
          <label for="pRunner">Runner-up %</label>
          <input id="pRunner" type="text" placeholder="e.g. 45" />
        </div>
      </div>

      <div class="mini" id="pStatus" style="margin-top:10px;"></div>
    </div>
    <div class="modalFoot">
      <button class="btn" id="clearPoll" type="button">Clear</button>
      <button class="btn primary" id="savePoll" type="button">Save</button>
    </div>
  </div>
</div>

<div class="toast" id="toast" role="status" aria-live="polite"></div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script>
  function googleTranslateElementInit() {
    try{
      new google.translate.TranslateElement(
        { pageLanguage: 'en', layout: google.translate.TranslateElement.InlineLayout.SIMPLE },
        'google_translate_element'
      );
    }catch(e){}
  }

  const $ = (s, r=document) => r.querySelector(s);
  const $$ = (s, r=document) => [...r.querySelectorAll(s)];
  const toastEl = $("#toast");

  function toast(msg){
    toastEl.textContent = msg;
    toastEl.classList.add("show");
    setTimeout(()=>toastEl.classList.remove("show"), 2200);
  }

  // Theme
  $("#themeBtn").addEventListener("click", ()=>{
    const t = document.body.getAttribute("data-theme") === "dark" ? "light" : "dark";
    document.body.setAttribute("data-theme", t);
    localStorage.setItem("theme", t);
    toast(`Theme: ${t}`);
  });
  (function initTheme(){
    const t = localStorage.getItem("theme");
    if(t) document.body.setAttribute("data-theme", t);
  })();

  // Larger text toggle
  $("#textBtn").addEventListener("click", ()=>{
    const big = document.body.getAttribute("data-text") === "big";
    document.body.setAttribute("data-text", big ? "normal" : "big");
    document.documentElement.style.fontSize = big ? "16px" : "18px";
    localStorage.setItem("textSize", big ? "normal" : "big");
    toast(big ? "Text: normal" : "Text: large");
  });
  (function initText(){
    const t = localStorage.getItem("textSize");
    if(t === "big"){
      document.body.setAttribute("data-text","big");
      document.documentElement.style.fontSize = "18px";
    }
  })();

  // Slideshow
  const slides = $$(".slide");
  let si = 0;
  setInterval(()=>{
    slides[si].classList.remove("on");
    si = (si + 1) % slides.length;
    slides[si].classList.add("on");
  }, 4300);

  // --------- DATA (baseline + internal momentum) ----------
  // NOTE: Polling is blank by default. Do not claim verified polling without real sources.
  const DEMO = [
    { name:"Alego Usonga", momentum:91, population2019:224343, registeredVoters2022:122002, preferred:true,
      poll:{ gumbo:"", runner:"", rating:"", url:"" } },
    { name:"Bondo",  momentum:90, population2019:197883, registeredVoters2022:104035, preferred:true,
      poll:{ gumbo:"", runner:"", rating:"", url:"" } },
    { name:"Gem",    momentum:89, population2019:179792, registeredVoters2022:93568, preferred:true,
      poll:{ gumbo:"", runner:"", rating:"", url:"" } },
    { name:"Rarieda",momentum:88, population2019:152570, registeredVoters2022:84849, preferred:true,
      poll:{ gumbo:"", runner:"", rating:"", url:"" } },
    { name:"Ugenya", momentum:87, population2019:134354, registeredVoters2022:69027, preferred:true,
      poll:{ gumbo:"", runner:"", rating:"", url:"" } },
    { name:"Ugunja", momentum:86, population2019:104241, registeredVoters2022:60114, preferred:true,
      poll:{ gumbo:"", runner:"", rating:"", url:"" } },
  ];

  const LS_KEY = "siaya_gumbo_campaign_pro_v1";
  const clone = (x)=> (window.structuredClone ? structuredClone(x) : JSON.parse(JSON.stringify(x)));

  function loadData(){
    const raw = localStorage.getItem(LS_KEY);
    if(!raw) return clone(DEMO);
    try{
      const j = JSON.parse(raw);
      if(Array.isArray(j) && j.length) return j;
    }catch(e){}
    return clone(DEMO);
  }
  function saveData(){ localStorage.setItem(LS_KEY, JSON.stringify(state.data)); }

  const state = { data: loadData(), metric: "momentum", search: "" };

  // Helpers
  const fmt = (n)=> Number.isFinite(n) ? n.toLocaleString() : "‚Äî";
  const toNum = (x)=> { const n = Number(String(x).trim()); return Number.isFinite(n) ? n : 0; };
  const esc = (s)=> String(s ?? "").replace(/[&<>"']/g, m => ({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;" }[m]));
  const isVerified = (r)=> (String(r.poll.url||"").trim().length>0) && ["A","B"].includes(String(r.poll.rating||"").toUpperCase().trim());
  const margin = (r)=> Math.round((toNum(r.poll.gumbo) - toNum(r.poll.runner)) * 10) / 10;
  const leadingVerified = (r)=> isVerified(r) && margin(r) >= 2.0 && toNum(r.poll.gumbo) > toNum(r.poll.runner);

  function metricLabel(m){
    return ({
      momentum:"Momentum (Internal)",
      voters:"Registered Voters (Baseline)",
      population:"Population 2019 (Baseline)",
      polling:"Polling (Verified) ‚Äî Gumbo %"
    })[m] || m;
  }
  function metricValue(r, m){
    if(m==="momentum") return toNum(r.momentum);
    if(m==="voters") return toNum(r.registeredVoters2022);
    if(m==="population") return toNum(r.population2019);
    if(m==="polling") return isVerified(r) ? toNum(r.poll.gumbo) : 0;
    return 0;
  }

  // KPI
  function renderKpi(){
    const avg = Math.round(state.data.reduce((a,b)=>a+toNum(b.momentum),0)/state.data.length);
    $("#kpiMomentum").textContent = avg;
    const voters = state.data.reduce((a,b)=>a+toNum(b.registeredVoters2022),0);
    $("#kpiVoters").textContent = voters ? voters.toLocaleString() : "‚Äî";
  }

  // Table (simple)
  const tbody = $("#tbody");
  function renderTable(){
    const q = state.search.trim().toLowerCase();
    const filtered = state.data.map((r,i)=>({r,i})).filter(x=>x.r.name.toLowerCase().includes(q));

    tbody.innerHTML = filtered.map(({r,i})=>{
      const pollingCell = isVerified(r)
        ? `<a href="${esc(r.poll.url)}" target="_blank" rel="noopener"><strong>${esc(r.poll.gumbo)}%</strong></a><div class="mini">Verified</div>`
        : `<span class="tagNeutral">Unverified</span><div class="mini">No source URL</div>`;

      const leadCell = leadingVerified(r)
        ? `<span class="badgeLead">‚úÖ Leading</span><div class="mini">Margin ${esc(margin(r))} pts</div>`
        : `<span class="mini">‚Äî</span>`;

      return `
        <tr>
          <td><strong>${esc(r.name)}</strong></td>
          <td>${r.preferred ? `<span class="badgePref">‚≠ê Preferred</span>` : `<span class="mini">‚Äî</span>`}</td>
          <td><strong>${esc(r.momentum)}</strong></td>
          <td>${fmt(toNum(r.population2019))}</td>
          <td>${fmt(toNum(r.registeredVoters2022))}</td>
          <td>${pollingCell}</td>
          <td>${leadCell}</td>
          <td>
            <button class="btn" type="button" data-edit="${i}" style="padding:8px 10px;border-radius:12px;">Edit Poll</button>
          </td>
        </tr>
      `;
    }).join("");

    $$("button[data-edit]").forEach(b=>{
      b.addEventListener("click", ()=>{
        const idx = parseInt(b.getAttribute("data-edit"),10);
        openPollModal(idx);
      });
    });
  }

  // Chart
  let chart;
  function buildChart(){
    const ctx = $("#chart");
    const labels = state.data.map(d=>d.name);
    const vals = state.data.map(d=>metricValue(d, state.metric));

    if(chart) chart.destroy();

    const suggestedMax = (state.metric==="momentum") ? 100 : (state.metric==="polling") ? 60 : undefined;

    chart = new Chart(ctx, {
      type: "bar",
      data: { labels, datasets: [{ label: metricLabel(state.metric), data: vals, borderWidth:1, borderRadius:10 }] },
      options: {
        responsive:true, maintainAspectRatio:false,
        plugins:{ legend:{ display:true, labels:{ boxWidth:12, font:{ size:11, weight:"bold" } } } },
        scales:{
          x:{ ticks:{ font:{ size:11 } }, grid:{ display:false } },
          y:{ beginAtZero:true, suggestedMax, ticks:{ font:{ size:11 } }, grid:{ color:"rgba(255,255,255,.08)" } }
        }
      }
    });
  }

  // Controls
  $("#metric").addEventListener("change", (e)=>{
    state.metric = e.target.value;
    buildChart();
    toast(`Metric: ${metricLabel(state.metric)}`);
  });
  $("#search").addEventListener("input", (e)=>{
    state.search = e.target.value;
    renderTable();
  });

  // Export
  $("#downloadJson").addEventListener("click", ()=>{
    const payload = { generatedAt:new Date().toISOString(), note:"Polling is only verified when a real published source URL + rating A/B + numbers are provided.", data: state.data };
    const blob = new Blob([JSON.stringify(payload, null, 2)], {type:"application/json"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url; a.download = "siaya-dashboard-data.json";
    document.body.appendChild(a); a.click(); a.remove();
    URL.revokeObjectURL(url);
    toast("Exported");
  });

  $("#resetDemo").addEventListener("click", ()=>{
    if(!confirm("Reset to demo?")) return;
    state.data = clone(DEMO);
    localStorage.removeItem(LS_KEY);
    saveData();
    renderKpi(); renderTable(); buildChart();
    toast("Reset done");
  });

  // Share buttons (WhatsApp + native share if available)
  function shareText(){
    return `Eng. Gumbo Wajonya for Governor of Siaya.\n\nPeople ‚Ä¢ Delivery ‚Ä¢ Integrity\nExplore the sub-county dashboard and join the movement:\n${location.href}`;
  }
  async function doShare(){
    const text = shareText();
    if(navigator.share){
      try{ await navigator.share({ title: document.title, text, url: location.href }); return; }catch(e){}
    }
    const wa = `https://wa.me/?text=${encodeURIComponent(text)}`;
    window.open(wa, "_blank", "noopener");
  }
  $("#shareBtn").addEventListener("click", doShare);
  $("#fabShare").addEventListener("click", doShare);
  $("#fabTop").addEventListener("click", ()=> window.scrollTo({ top:0, behavior:"smooth" }));

  // Events: ICS download + copy
  function buildICS(){
    // Demo events (edit as needed)
    const events = [
      { title:"Townhall ‚Ä¢ Siaya (Jobs & MSMEs)", start:"20260110T070000Z", end:"20260110T093000Z", location:"Siaya", desc:"Campaign townhall meeting." },
      { title:"Community Baraza ‚Ä¢ Bondo (Water & Roads)", start:"20260114T110000Z", end:"20260114T130000Z", location:"Bondo", desc:"Community engagement." }
    ];
    const lines = [
      "BEGIN:VCALENDAR",
      "VERSION:2.0",
      "PRODID:-//GumboCampaign//Siaya//EN"
    ];
    events.forEach(e=>{
      lines.push("BEGIN:VEVENT");
      lines.push(`UID:${crypto?.randomUUID ? crypto.randomUUID() : (Date.now()+Math.random())}@gumbosiaya`);
      lines.push(`DTSTAMP:${new Date().toISOString().replace(/[-:]/g,"").replace(/\.\d+Z/,"Z")}`);
      lines.push(`DTSTART:${e.start}`);
      lines.push(`DTEND:${e.end}`);
      lines.push(`SUMMARY:${e.title}`);
      lines.push(`LOCATION:${e.location}`);
      lines.push(`DESCRIPTION:${e.desc}`);
      lines.push("END:VEVENT");
    });
    lines.push("END:VCALENDAR");
    return lines.join("\r\n");
  }
  $("#downloadIcs").addEventListener("click", ()=>{
    const ics = buildICS();
    const blob = new Blob([ics], {type:"text/calendar"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url; a.download = "campaign-events.ics";
    document.body.appendChild(a); a.click(); a.remove();
    URL.revokeObjectURL(url);
    toast("Calendar downloaded");
  });
  $("#copyEvents").addEventListener("click", async ()=>{
    const text = "Upcoming events:\n- Townhall ‚Ä¢ Siaya (Jobs & MSMEs)\n- Community Baraza ‚Ä¢ Bondo (Water & Roads)\n\nJoin the movement: " + location.href;
    try{ await navigator.clipboard.writeText(text); toast("Copied"); }catch(e){ toast("Copy failed"); }
  });

  // Volunteer local demo
  const volStatus = $("#volStatus");
  const VKEY = "siaya_volunteer_v1";
  $("#saveVolunteer").addEventListener("click", ()=>{
    const v = {
      name: $("#vName").value.trim(),
      phone: $("#vPhone").value.trim(),
      subcounty: $("#vSub").value,
      msg: $("#vMsg").value.trim(),
      savedAt: new Date().toISOString()
    };
    localStorage.setItem(VKEY, JSON.stringify(v, null, 2));
    volStatus.textContent = "Saved locally on this device (demo).";
    toast("Saved");
  });
  $("#clearVolunteer").addEventListener("click", ()=>{
    $("#vName").value=""; $("#vPhone").value=""; $("#vMsg").value="";
    localStorage.removeItem(VKEY);
    volStatus.textContent = "Cleared.";
    toast("Cleared");
  });
  $("#downloadVolunteer").addEventListener("click", ()=>{
    const raw = localStorage.getItem(VKEY);
    if(!raw){ toast("Nothing saved"); return; }
    const blob = new Blob([raw], {type:"application/json"});
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url; a.download = "volunteer-info.json";
    document.body.appendChild(a); a.click(); a.remove();
    URL.revokeObjectURL(url);
    toast("Downloaded");
  });

  // Poll modal
  const pollModal = $("#pollModal");
  const pSub = $("#pSub"), pUrl = $("#pUrl"), pRating = $("#pRating"), pGumbo = $("#pGumbo"), pRunner = $("#pRunner"), pStatus = $("#pStatus");
  let currentIdx = -1;

  function openPollModal(idx){
    currentIdx = idx;
    const r = state.data[idx];
    $("#pollTitle").textContent = `Edit Verified Poll ‚Ä¢ ${r.name}`;
    pSub.value = r.name;
    pUrl.value = r.poll.url || "";
    pRating.value = r.poll.rating || "";
    pGumbo.value = r.poll.gumbo || "";
    pRunner.value = r.poll.runner || "";
    pStatus.textContent = "";
    pollModal.style.display = "flex";
    pUrl.focus();
  }
  function closePollModal(){
    pollModal.style.display = "none";
    currentIdx = -1;
  }
  $("#closeModal").addEventListener("click", closePollModal);
  pollModal.addEventListener("click", (e)=>{ if(e.target === pollModal) closePollModal(); });
  document.addEventListener("keydown", (e)=>{ if(e.key === "Escape" && pollModal.style.display === "flex") closePollModal(); });

  function validatePollInputs(){
    const url = String(pUrl.value||"").trim();
    const rating = String(pRating.value||"").trim().toUpperCase();
    const g = toNum(pGumbo.value);
    const r = toNum(pRunner.value);

    if(!url) return "Add a source URL to verify polling.";
    if(!(rating==="A" || rating==="B")) return "Rating must be A or B to mark as verified.";
    if(!(g>0) || !(r>=0)) return "Enter valid numbers for Gumbo% and runner-up%.";
    const m = Math.round((g - r)*10)/10;
    return leadingVerified({ poll:{ url, rating, gumbo:g, runner:r } }) ? `Leading verified ‚úÖ (margin ${m} pts).` : `Verified saved. Not marked leading (margin ${m} pts).`;
  }

  $("#savePoll").addEventListener("click", ()=>{
    if(currentIdx < 0) return;
    const msg = validatePollInputs();
    pStatus.textContent = msg;

    // Save regardless; logic still controls badges
    const r = state.data[currentIdx];
    r.poll.url = String(pUrl.value||"").trim();
    r.poll.rating = String(pRating.value||"").trim().toUpperCase();
    r.poll.gumbo = String(pGumbo.value||"").trim();
    r.poll.runner = String(pRunner.value||"").trim();

    saveData();
    renderTable();
    buildChart();
    renderKpi();
    toast("Poll saved");
    // keep modal open so user can read message; close on next click if they want
  });

  $("#clearPoll").addEventListener("click", ()=>{
    pUrl.value=""; pRating.value=""; pGumbo.value=""; pRunner.value="";
    pStatus.textContent = "Cleared. (No verified polling unless you add a source URL + rating + numbers.)";
  });

  // Init
  document.getElementById("year").textContent = new Date().getFullYear();
  renderKpi();
  renderTable();
  buildChart();
</script>
</body>
</html>
